{"version":3,"sources":["images/settings.svg","images/hiragana_stroke_order.png","images/katakana_stroke_order.png","components/Body.tsx","components/Checkbox.tsx","components/Header.tsx","components/HomeButton.tsx","components/Section.tsx","types.ts","getDeckName.ts","modifierNameToClassName.ts","components/Button.tsx","containers/CardMenu.tsx","components/SettingsButton.tsx","containers/DeckMenu.tsx","containers/SettingsMenu.tsx","components/AffirmationSwipeIndicator.tsx","containers/WritingDrill.tsx","romajiArray.ts","decks.ts","randomlySort.ts","containers/PostDrillMenu.tsx","CardsAgainstIlliteracy.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","Body","children","className","Checkbox","checked","onClick","Header","background","HomeButton","color","Section","header","StateType","MoraCategory","Deck","RomajiMap","v","Kv","Sv","Tv","Nv","Hv","Mv","Yv","Rv","Wv","N","getDeckName","deck","modifierNameToClassName","baseClass","modifierName","modifierClasses","split","map","modifier","join","Button","CATEGORIES","CardMenu","includedCategories","onToggleCategory","onHome","onDrillStart","category","categoryName","has","key","SettingsButton","src","settingsIcon","alt","DeckMenu","decks","onSettings","onSelect","DIRECTIONS","SettingsMenu","selectedSwipeDirection","areWritingCorrectionsEnabled","onSelectSwipeDirection","onToggleWritingCorrections","direction","AffirmationSwipeIndicator","normalizedDelta","style","width","left","height","top","WritingDrill","this","props","remainingCards","isTopCardRevealed","onReveal","onAffirmationSwipeStart","onAffirmationSwipeMove","onAffirmationSwipeEnd","canvasRef","onPenStart","onPenMove","onPenEnd","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","noOp","onMouseMove","onMouseUp","window","innerWidth","innerHeight","ref","romaji","image","current","addEventListener","e","preventDefault","passive","React","Component","romajiArray","HIRAGANA_TABLE_CONFIG","leftCellX","topCellY","cellWidth","cellHeight","crop","columns","rows","cellPositions","Map","row","column","KATAKANA_TABLE_CONFIG","kanaMaps","Hiragana","option","none","Katakana","hiraganaMapLoaded","loadTable","HIRAGANA_TABLE_URL","katakanaMapLoaded","KATAKANA_TABLE_URL","raw","then","imageMap","some","Promise","all","url","config","rProm","fulfill","reject","f","r","createResolvablePromise","tableImage","document","createElement","tableCanvas","tableCtx","getContext","drawImage","kanaMap","cellCanvas","cellCtx","forEach","get","cellLeft","Math","round","cellTop","croppedImageData","getImageData","putImageData","cellImage","toDataURL","set","randomlySort","arr","clone","slice","i","sort","halfPositiveHalfNegative","random","PostDrillMenu","onRestart","HORIZONTAL_SWIPE_SIZE","VERTICAL_SWIPE_SIZE","SUPPORTS_TOUCH","LOCAL_STORAGE_KEYS","CardsAgainstIlliteracy","previousPenLocation","state","stateType","bindMethods","createRef","bind","onDeckSelect","onCardReveal","onKeyUp","onCardCorrect","onCardIncorrect","onDrillRestart","removeEventListener","updatedState","localStorage","getItem","setState","updateState","_stateType","updated","serializedCategorySet","ImmutableSet","categorySetUtils","parse","updatedCategories","remove","add","setItem","stringify","initialCards","categories","cards","push","expect","getInitialCards","newState","cardsToRepractice","startingTouch","undefined","changedTouches","includes","id","identifier","x","clientX","y","clientY","event","newTouch","Array","from","find","t","deltaX","max","min","deltaY","simulateRightSwipe","simulateLeftSwipe","simulateUpSwipe","simulateDownSwipe","clearCanvas","length","clearRect","concat","type","offsetY","adjustedY","ctx","fillStyle","fillRect","beginPath","moveTo","lineTo","closePath","lineWidth","strokeStyle","stroke","start","Date","now","render","completionFactor","requestAnimationFrame","JSON","keys","string","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","StrictMode","getElementById","URL","process","href","origin","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.1c6478cc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/settings.5f70f755.svg\";","module.exports = __webpack_public_path__ + \"static/media/hiragana_stroke_order.e82e3b7c.png\";","module.exports = __webpack_public_path__ + \"static/media/katakana_stroke_order.b38bd4cd.png\";","import React from \"react\";\nimport \"../styles/Body.css\";\n\nexport interface Props {\n  children: React.ReactChild | React.ReactChild[];\n}\n\nexport default function Body({ children }: Props): React.ReactElement {\n  return <div className=\"Body\">{children}</div>;\n}\n","import React from \"react\";\nimport \"../styles/Checkbox.css\";\n\nexport interface Props {\n  children: React.ReactChild | React.ReactChild[];\n  checked: boolean;\n  onClick(event: React.MouseEvent): void;\n}\n\nexport default function Checkbox({\n  children,\n  checked,\n  onClick,\n}: Props): React.ReactElement {\n  return (\n    <div\n      className={\"Checkbox\" + (checked ? \" Checkbox--checked\" : \"\")}\n      onClick={onClick}\n    >\n      {children}\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"../styles/Header.css\";\n\nexport interface Props {\n  children: React.ReactChild | React.ReactChild[];\n  background: string;\n}\n\nexport default function Header({\n  children,\n  background,\n}: Props): React.ReactElement {\n  return <div className={\"Header Header--\" + background}>{children}</div>;\n}\n","import React from \"react\";\nimport \"../styles/HomeButton.css\";\n\nexport interface Props {\n  color: string;\n  onClick(): void;\n}\n\nexport default function HomeButton({\n  color,\n  onClick,\n}: Props): React.ReactElement {\n  return (\n    <button className={\"HomeButton HomeButton--\" + color} onClick={onClick}>\n      x\n    </button>\n  );\n}\n","import React from \"react\";\nimport \"../styles/Section.css\";\n\nexport interface Props {\n  header: React.ReactChild;\n  children: React.ReactChild | React.ReactChild[];\n}\n\nexport default function Section({\n  header,\n  children,\n}: Props): React.ReactElement {\n  return (\n    <div className=\"Section\">\n      <div className=\"Section__Header\">{header}</div>\n      {children}\n    </div>\n  );\n}\n","import { Set as ImmutableSet } from \"immutable\";\n\nexport type AppState =\n  | DeckMenuState\n  | SettingsState\n  | CardMenuState\n  | WritingDrillState\n  | PostDrillMenuState;\n\nexport enum StateType {\n  DeckMenu,\n  SettingsMenu,\n  CardMenu,\n  WritingDrill,\n  PostDrillMenu,\n}\n\nexport interface AppStateMap {\n  [StateType.DeckMenu]: DeckMenuState;\n  [StateType.SettingsMenu]: SettingsState;\n  [StateType.CardMenu]: CardMenuState;\n  [StateType.WritingDrill]: WritingDrillState;\n  [StateType.PostDrillMenu]: PostDrillMenuState;\n}\n\nexport interface DeckMenuState {\n  stateType: StateType.DeckMenu;\n}\n\nexport interface SettingsState {\n  stateType: StateType.SettingsMenu;\n  selectedSwipeDirection: SwipeDirection;\n  areWritingCorrectionsEnabled: boolean;\n}\n\nexport interface CardMenuState {\n  stateType: StateType.CardMenu;\n  deck: Deck;\n  includedCategories: ImmutableSet<MoraCategory>;\n}\n\nexport interface WritingDrillState {\n  stateType: StateType.WritingDrill;\n  deck: Deck;\n  initialCards: Card[];\n  remainingCards: Card[];\n  cardsToRepractice: Card[];\n  isTopCardRevealed: boolean;\n  areWritingCorrectionsEnabled: boolean;\n  selectedSwipeDirection: SwipeDirection;\n  startingTouch: { id: number; x?: number; y?: number } | undefined;\n  normalizedDelta: number;\n}\n\nexport interface PostDrillMenuState {\n  stateType: StateType.PostDrillMenu;\n  deck: Deck;\n  initialCards: Card[];\n}\n\nexport enum MoraCategory {\n  v,\n  Kv,\n  Sv,\n  Tv,\n  Nv,\n  Hv,\n  Mv,\n  Yv,\n  Rv,\n  Wv,\n  N,\n}\n\nexport type Romaji<\n  S extends MoraCategory = MoraCategory\n> = typeof RomajiMap[S][number];\n\nexport const RomajiMap = {\n  [MoraCategory.v]: [\"a\", \"i\", \"u\", \"e\", \"o\"],\n  [MoraCategory.Kv]: [\"ka\", \"ki\", \"ku\", \"ke\", \"ko\"],\n  [MoraCategory.Sv]: [\"sa\", \"shi\", \"su\", \"se\", \"so\"],\n  [MoraCategory.Tv]: [\"ta\", \"chi\", \"tsu\", \"te\", \"to\"],\n  [MoraCategory.Nv]: [\"na\", \"ni\", \"nu\", \"ne\", \"no\"],\n  [MoraCategory.Hv]: [\"ha\", \"hi\", \"fu\", \"he\", \"ho\"],\n  [MoraCategory.Mv]: [\"ma\", \"mi\", \"mu\", \"me\", \"mo\"],\n  [MoraCategory.Yv]: [\"ya\", \"yu\", \"yo\"],\n  [MoraCategory.Rv]: [\"ra\", \"ri\", \"ru\", \"re\", \"ro\"],\n  [MoraCategory.Wv]: [\"wa\", \"wi\", \"we\", \"wo\"],\n  [MoraCategory.N]: [\"n\"],\n} as const;\n\nexport type SwipeDirection = \"Right\" | \"Left\" | \"Up\" | \"Down\";\n\nexport enum Deck {\n  Hiragana,\n  Katakana,\n}\n\nexport interface Card {\n  readonly romaji: string;\n  readonly image: HTMLImageElement;\n}\n\nexport type PointerDownEvent = TouchStartEvent | MouseDownEvent;\n\nexport interface TouchStartEvent extends React.TouchEvent {\n  type: \"touchstart\";\n}\n\nexport interface MouseDownEvent extends React.MouseEvent {\n  type: \"mousedown\";\n}\n\nexport type PointerMoveEvent = TouchMoveEvent | MouseMoveEvent;\n\nexport interface TouchMoveEvent extends React.TouchEvent {\n  type: \"touchmove\";\n}\n\nexport interface MouseMoveEvent extends React.MouseEvent {\n  type: \"mousemove\";\n}\n\nexport type PointerUpEvent = TouchEndEvent | MouseUpEvent;\n\nexport interface TouchEndEvent extends React.TouchEvent {\n  type: \"touchend\";\n}\n\nexport interface MouseUpEvent extends React.MouseEvent {\n  type: \"mouseup\";\n}\n\nexport type NestedPromiseArray<T> = (T | Promise<T> | NestedPromiseArray<T>)[];\n\nexport type NestedArray<T> = (T | NestedArray<T>)[];\n","import { Deck } from \"./types\";\n\nexport default function getDeckName(deck: Deck): string {\n  return Deck[deck];\n}\n","export default function modifierNameToClassName(\n  baseClass: string,\n  modifierName: string\n): string {\n  const modifiers = modifierName === \"\" ? [] : modifierName.split(\" \");\n  const modifierClasses = modifiers.map(\n    (modifier) => baseClass + \"--\" + modifier\n  );\n  return baseClass + [\"\", ...modifierClasses].join(\" \");\n}\n","import React from \"react\";\nimport modifierNameToClassName from \"../modifierNameToClassName\";\nimport \"../styles/Button.css\";\n\nexport interface Props {\n  modifierName?: string;\n  onClick(): void;\n  children: React.ReactChild | React.ReactChild[];\n}\n\nexport default function Button({\n  modifierName = \"\",\n  onClick,\n  children,\n}: Props): React.ReactElement {\n  return (\n    <div\n      className={modifierNameToClassName(\"Button\", modifierName)}\n      onClick={onClick}\n    >\n      {children}\n    </div>\n  );\n}\n","import { Set as ImmutableSet } from \"immutable\";\nimport React from \"react\";\nimport Body from \"../components/Body\";\nimport Checkbox from \"../components/Checkbox\";\nimport Header from \"../components/Header\";\nimport HomeButton from \"../components/HomeButton\";\nimport Section from \"../components/Section\";\nimport getDeckName from \"../getDeckName\";\nimport { Deck, MoraCategory } from \"../types\";\nimport Button from \"../components/Button\";\n\nexport interface Props {\n  deck: Deck;\n  includedCategories: ImmutableSet<MoraCategory>;\n  onToggleCategory(category: MoraCategory): void;\n  onHome(): void;\n  onDrillStart(): void;\n}\n\nconst CATEGORIES: [MoraCategory, string][] = [\n  [MoraCategory.v, \"Vowels\"],\n  [MoraCategory.Kv, \"k-\"],\n  [MoraCategory.Sv, \"s-\"],\n  [MoraCategory.Tv, \"t-\"],\n  [MoraCategory.Nv, \"n-\"],\n  [MoraCategory.Hv, \"h-\"],\n  [MoraCategory.Mv, \"m-\"],\n  [MoraCategory.Yv, \"y-\"],\n  [MoraCategory.Rv, \"r-\"],\n  [MoraCategory.Wv, \"w-\"],\n  [MoraCategory.N, \"n\"],\n];\n\nexport default function CardMenu({\n  deck,\n  includedCategories,\n  onToggleCategory,\n  onHome,\n  onDrillStart,\n}: Props): React.ReactElement {\n  return (\n    <>\n      <Header background=\"blue\">{getDeckName(deck)}</Header>\n      <HomeButton color=\"blue\" onClick={onHome} />\n      <Body>\n        <Section header=\"Categories\">\n          {CATEGORIES.map(([category, categoryName]) => (\n            <Checkbox\n              checked={includedCategories.has(category)}\n              onClick={() => onToggleCategory(category)}\n              key={category}\n            >\n              {categoryName}\n            </Checkbox>\n          ))}\n        </Section>\n        <Button modifierName=\"blue shadow\" onClick={onDrillStart}>\n          Start\n        </Button>\n      </Body>\n    </>\n  );\n}\n","import React from \"react\";\nimport settingsIcon from \"../images/settings.svg\";\nimport \"../styles/SettingsButton.css\";\n\nexport interface Props {\n  onClick(): void;\n}\n\nexport default function SettingsButton({ onClick }: Props): React.ReactElement {\n  return (\n    <img\n      src={settingsIcon}\n      alt=\"Settings button\"\n      className=\"SettingsButton\"\n      onClick={onClick}\n    />\n  );\n}\n","import React from \"react\";\nimport Body from \"../components/Body\";\nimport Button from \"../components/Button\";\nimport Header from \"../components/Header\";\nimport SettingsButton from \"../components/SettingsButton\";\nimport getDeckName from \"../getDeckName\";\nimport { Deck } from \"../types\";\n\nexport interface Props {\n  decks: Deck[];\n\n  onSettings(): void;\n  onSelect(deck: Deck): void;\n}\n\nexport default function DeckMenu({\n  decks,\n\n  onSettings,\n  onSelect,\n}: Props): React.ReactElement {\n  return (\n    <>\n      <Header background=\"white\">Lessons</Header>\n      <SettingsButton onClick={onSettings} />\n      <Body>\n        {decks.map(deck => (\n          <Button\n            modifierName=\"blue shadow\"\n            onClick={() => onSelect(deck)}\n            key={deck}\n          >\n            {getDeckName(deck)}\n          </Button>\n        ))}\n      </Body>\n    </>\n  );\n}\n","import React from \"react\";\nimport Body from \"../components/Body\";\nimport Checkbox from \"../components/Checkbox\";\nimport Header from \"../components/Header\";\nimport HomeButton from \"../components/HomeButton\";\nimport Section from \"../components/Section\";\nimport { SwipeDirection } from \"../types\";\n\nexport interface Props {\n  selectedSwipeDirection: SwipeDirection;\n  areWritingCorrectionsEnabled: boolean;\n\n  onHome(): void;\n  onSelectSwipeDirection(direction: SwipeDirection): void;\n  onToggleWritingCorrections(): void;\n}\n\nconst DIRECTIONS: SwipeDirection[] = [\"Right\", \"Left\", \"Up\", \"Down\"];\n\nexport default function SettingsMenu({\n  selectedSwipeDirection,\n  areWritingCorrectionsEnabled,\n\n  onHome,\n  onSelectSwipeDirection,\n  onToggleWritingCorrections,\n}: Props): React.ReactElement {\n  return (\n    <>\n      <Header background=\"blue\">Settings</Header>\n      <HomeButton color=\"blue\" onClick={onHome} />\n      <Body>\n        <Section header=\"Correct Answer Swipe Direction\">\n          {DIRECTIONS.map(direction => (\n            <Checkbox\n              checked={direction === selectedSwipeDirection}\n              onClick={() => onSelectSwipeDirection(direction)}\n              key={direction}\n            >\n              {direction}\n            </Checkbox>\n          ))}\n        </Section>\n        <Section header=\"Writing Corrections\">\n          <Checkbox\n            checked={areWritingCorrectionsEnabled}\n            onClick={onToggleWritingCorrections}\n          >\n            Enabled?\n          </Checkbox>\n        </Section>\n      </Body>\n    </>\n  );\n}\n","import React from \"react\";\nimport \"../styles/AffirmationSwipeIndicator.css\";\nimport { SwipeDirection } from \"../types\";\n\nexport interface Props {\n  selectedSwipeDirection: SwipeDirection;\n  normalizedDelta: number;\n}\n\nexport default function AffirmationSwipeIndicator({\n  selectedSwipeDirection,\n  normalizedDelta,\n}: Props): React.ReactElement {\n  switch (selectedSwipeDirection) {\n    case \"Right\":\n      return normalizedDelta > 0 ? (\n        <div\n          className=\"AffirmationSwipeIndicator--horizontal--correct\"\n          style={{\n            width: normalizedDelta * 100 + \"vw\",\n          }}\n        />\n      ) : (\n        <div\n          className=\"AffirmationSwipeIndicator--horizontal--incorrect\"\n          style={{\n            left: (1 + normalizedDelta) * 100 + \"vw\",\n            width: -normalizedDelta * 100 + \"vw\",\n          }}\n        />\n      );\n    case \"Left\":\n      return normalizedDelta > 0 ? (\n        <div\n          className=\"AffirmationSwipeIndicator--horizontal--incorrect\"\n          style={{\n            width: normalizedDelta * 100 + \"vw\",\n          }}\n        />\n      ) : (\n        <div\n          className=\"AffirmationSwipeIndicator--horizontal--correct\"\n          style={{\n            left: (1 + normalizedDelta) * 100 + \"vw\",\n            width: -normalizedDelta * 100 + \"vw\",\n          }}\n        />\n      );\n    case \"Up\":\n      return normalizedDelta > 0 ? (\n        <div\n          className=\"AffirmationSwipeIndicator--vertical--incorrect\"\n          style={{\n            height: normalizedDelta * 89 + \"vh\",\n          }}\n        />\n      ) : (\n        <div\n          className=\"AffirmationSwipeIndicator--vertical--correct\"\n          style={{\n            top: 11 + (1 + normalizedDelta) * 89 + \"vh\",\n            height: -normalizedDelta * 89 + \"vh\",\n          }}\n        />\n      );\n    case \"Down\":\n      return normalizedDelta > 0 ? (\n        <div\n          className=\"AffirmationSwipeIndicator--vertical--correct\"\n          style={{\n            height: normalizedDelta * 89 + \"vh\",\n          }}\n        />\n      ) : (\n        <div\n          className=\"AffirmationSwipeIndicator--vertical--incorrect\"\n          style={{\n            top: 11 + (1 + normalizedDelta) * 89 + \"vh\",\n            height: -normalizedDelta * 89 + \"vh\",\n          }}\n        />\n      );\n  }\n}\n","import React from \"react\";\nimport AffirmationSwipeIndicator from \"../components/AffirmationSwipeIndicator\";\nimport Header from \"../components/Header\";\nimport HomeButton from \"../components/HomeButton\";\nimport getDeckName from \"../getDeckName\";\nimport \"../styles/WritingDrill.css\";\nimport {\n  Card,\n  Deck,\n  PointerDownEvent,\n  PointerMoveEvent,\n  PointerUpEvent,\n  SwipeDirection,\n} from \"../types\";\n\nexport interface Props {\n  deck: Deck;\n  remainingCards: Card[];\n  isTopCardRevealed: boolean;\n  selectedSwipeDirection: SwipeDirection;\n  normalizedDelta: number;\n  areWritingCorrectionsEnabled: boolean;\n\n  onHome(): void;\n  onPenStart(event: PointerDownEvent): void;\n  onPenMove(event: PointerMoveEvent): void;\n  onPenEnd(event: PointerUpEvent): void;\n  onReveal(): void;\n  onAffirmationSwipeStart(event: React.TouchEvent): void;\n  onAffirmationSwipeMove(event: React.TouchEvent): void;\n  onAffirmationSwipeEnd(event: React.TouchEvent): void;\n\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n}\n\nexport interface State {}\n\nexport default class WritingDrill extends React.Component<Props, State> {\n  render() {\n    const {\n      deck,\n      remainingCards,\n      isTopCardRevealed,\n      selectedSwipeDirection,\n      normalizedDelta,\n      areWritingCorrectionsEnabled,\n\n      onHome,\n      onReveal,\n      onAffirmationSwipeStart,\n      onAffirmationSwipeMove,\n      onAffirmationSwipeEnd,\n\n      canvasRef,\n    } = this.props;\n\n    const onPenStart = this.props.onPenStart as (\n      event: React.TouchEvent | React.MouseEvent,\n    ) => void;\n    const onPenMove = this.props.onPenMove as (\n      event: React.TouchEvent | React.MouseEvent,\n    ) => void;\n    const onPenEnd = this.props.onPenEnd as (\n      event: React.TouchEvent | React.MouseEvent,\n    ) => void;\n\n    if (isTopCardRevealed) {\n      return (\n        <>\n          <Header background=\"blue\">{getDeckName(deck)}</Header>\n          <HomeButton color=\"blue\" onClick={onHome} />\n          <canvas\n            onTouchStart={\n              areWritingCorrectionsEnabled\n                ? onPenStart\n                : onAffirmationSwipeStart\n            }\n            onTouchMove={\n              areWritingCorrectionsEnabled ? onPenMove : onAffirmationSwipeMove\n            }\n            onTouchEnd={\n              areWritingCorrectionsEnabled ? onPenEnd : onAffirmationSwipeEnd\n            }\n            onMouseDown={areWritingCorrectionsEnabled ? onPenStart : noOp}\n            onMouseMove={areWritingCorrectionsEnabled ? onPenMove : noOp}\n            onMouseUp={areWritingCorrectionsEnabled ? onPenEnd : noOp}\n            width={window.innerWidth}\n            height={window.innerHeight * 0.62}\n            ref={canvasRef}\n          />\n          <div\n            className=\"WritingDrill__CharacterContainer\"\n            onTouchStart={onAffirmationSwipeStart}\n            onTouchMove={onAffirmationSwipeMove}\n            onTouchEnd={onAffirmationSwipeEnd}\n          >\n            <div className=\"WritingDrill__Characters\">\n              <img\n                className=\"WritingDrill__StrokeOrderImage\"\n                alt={remainingCards[0].romaji + \" stroke order\"}\n                src={remainingCards[0].image.src}\n              />\n            </div>\n          </div>\n          <AffirmationSwipeIndicator\n            selectedSwipeDirection={selectedSwipeDirection}\n            normalizedDelta={normalizedDelta}\n          />\n        </>\n      );\n    }\n    return (\n      <>\n        <Header background=\"blue\">{getDeckName(deck)}</Header>\n        <HomeButton color=\"blue\" onClick={onHome} />\n        <canvas\n          onTouchStart={onPenStart}\n          onTouchMove={onPenMove}\n          onMouseDown={onPenStart}\n          onMouseMove={onPenMove}\n          onMouseUp={onPenEnd}\n          width={window.innerWidth}\n          height={window.innerHeight * 0.62}\n          ref={canvasRef}\n        />\n        <div className=\"WritingDrill__Romaji\" onClick={onReveal}>\n          {remainingCards[0].romaji}\n        </div>\n      </>\n    );\n  }\n\n  componentDidMount() {\n    this.props.canvasRef.current!.addEventListener(\n      \"touchmove\",\n      e => {\n        e.preventDefault();\n      },\n      { passive: false },\n    );\n  }\n}\n\nfunction noOp(): void {}\n","import { Romaji } from \"./types\";\n\nconst romajiArray: Romaji[] = [\n  \"a\",\n  \"i\",\n  \"u\",\n  \"e\",\n  \"o\",\n  \"ka\",\n  \"ki\",\n  \"ku\",\n  \"ke\",\n  \"ko\",\n  \"sa\",\n  \"shi\",\n  \"su\",\n  \"se\",\n  \"so\",\n  \"ta\",\n  \"chi\",\n  \"tsu\",\n  \"te\",\n  \"to\",\n  \"na\",\n  \"ni\",\n  \"nu\",\n  \"ne\",\n  \"no\",\n  \"ha\",\n  \"hi\",\n  \"fu\",\n  \"he\",\n  \"ho\",\n  \"ma\",\n  \"mi\",\n  \"mu\",\n  \"me\",\n  \"mo\",\n  \"ya\",\n  \"yu\",\n  \"yo\",\n  \"ra\",\n  \"ri\",\n  \"ru\",\n  \"re\",\n  \"ro\",\n  \"wa\",\n  \"wi\",\n  \"we\",\n  \"wo\",\n  \"n\",\n];\n\nexport default romajiArray;\n","import { option, Option } from \"rusty-ts\";\nimport romajiArray from \"./romajiArray\";\nimport { Romaji, Deck } from \"./types\";\nimport HIRAGANA_TABLE_URL from \"./images/hiragana_stroke_order.png\";\nimport KATAKANA_TABLE_URL from \"./images/katakana_stroke_order.png\";\n\nexport interface KanaMaps {\n  [Deck.Hiragana]: Option<KanaMap>;\n  [Deck.Katakana]: Option<KanaMap>;\n}\n\nexport type KanaMap = Map<Romaji, HTMLImageElement>;\n\ninterface ResolvablePromise<T> {\n  readonly raw: Promise<T>;\n  fulfill(value: T): void;\n  reject(value: unknown): void;\n}\n\ninterface TableConfig {\n  leftCellX: number;\n  topCellY: number;\n  cellWidth: number;\n  cellHeight: number;\n  crop: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  };\n  columns: number;\n  rows: number;\n  cellPositions: Map<Romaji, CellPosition>;\n}\n\ninterface CellPosition {\n  column: number;\n  row: number;\n}\n\nconst HIRAGANA_TABLE_CONFIG: TableConfig = {\n  leftCellX: 58,\n  topCellY: 162,\n  cellWidth: 213.3,\n  cellHeight: 266.5,\n  crop: {\n    left: 0,\n    top: 0,\n    width: 206,\n    height: 187,\n  },\n  columns: 11,\n  rows: 5,\n  cellPositions: new Map<Romaji, CellPosition>([\n    [\"n\", { row: 0, column: 0 }],\n\n    [\"wa\", { row: 0, column: 1 }],\n    [\"wi\", { row: 1, column: 1 }],\n    [\"we\", { row: 3, column: 1 }],\n    [\"wo\", { row: 4, column: 1 }],\n\n    [\"ra\", { row: 0, column: 2 }],\n    [\"ri\", { row: 1, column: 2 }],\n    [\"ru\", { row: 2, column: 2 }],\n    [\"re\", { row: 3, column: 2 }],\n    [\"ro\", { row: 4, column: 2 }],\n\n    [\"ya\", { row: 0, column: 3 }],\n    [\"yu\", { row: 2, column: 3 }],\n    [\"yo\", { row: 4, column: 3 }],\n\n    [\"ma\", { row: 0, column: 4 }],\n    [\"mi\", { row: 1, column: 4 }],\n    [\"mu\", { row: 2, column: 4 }],\n    [\"me\", { row: 3, column: 4 }],\n    [\"mo\", { row: 4, column: 4 }],\n\n    [\"ha\", { row: 0, column: 5 }],\n    [\"hi\", { row: 1, column: 5 }],\n    [\"fu\", { row: 2, column: 5 }],\n    [\"he\", { row: 3, column: 5 }],\n    [\"ho\", { row: 4, column: 5 }],\n\n    [\"na\", { row: 0, column: 6 }],\n    [\"ni\", { row: 1, column: 6 }],\n    [\"nu\", { row: 2, column: 6 }],\n    [\"ne\", { row: 3, column: 6 }],\n    [\"no\", { row: 4, column: 6 }],\n\n    [\"ta\", { row: 0, column: 7 }],\n    [\"chi\", { row: 1, column: 7 }],\n    [\"tsu\", { row: 2, column: 7 }],\n    [\"te\", { row: 3, column: 7 }],\n    [\"to\", { row: 4, column: 7 }],\n\n    [\"sa\", { row: 0, column: 8 }],\n    [\"shi\", { row: 1, column: 8 }],\n    [\"su\", { row: 2, column: 8 }],\n    [\"se\", { row: 3, column: 8 }],\n    [\"so\", { row: 4, column: 8 }],\n\n    [\"ka\", { row: 0, column: 9 }],\n    [\"ki\", { row: 1, column: 9 }],\n    [\"ku\", { row: 2, column: 9 }],\n    [\"ke\", { row: 3, column: 9 }],\n    [\"ko\", { row: 4, column: 9 }],\n\n    [\"a\", { row: 0, column: 10 }],\n    [\"i\", { row: 1, column: 10 }],\n    [\"u\", { row: 2, column: 10 }],\n    [\"e\", { row: 3, column: 10 }],\n    [\"o\", { row: 4, column: 10 }],\n  ]),\n};\n\nconst KATAKANA_TABLE_CONFIG: TableConfig = {\n  leftCellX: 58,\n  topCellY: 162,\n  cellWidth: 213.3,\n  cellHeight: 266.5,\n  crop: {\n    left: 0,\n    top: 0,\n    width: 206,\n    height: 187,\n  },\n  columns: 11,\n  rows: 5,\n  cellPositions: new Map([\n    [\"n\", { row: 0, column: 0 }],\n\n    [\"wa\", { row: 0, column: 1 }],\n    [\"wi\", { row: 1, column: 1 }],\n    [\"we\", { row: 3, column: 1 }],\n    [\"wo\", { row: 4, column: 1 }],\n\n    [\"ra\", { row: 0, column: 2 }],\n    [\"ri\", { row: 1, column: 2 }],\n    [\"ru\", { row: 2, column: 2 }],\n    [\"re\", { row: 3, column: 2 }],\n    [\"ro\", { row: 4, column: 2 }],\n\n    [\"ya\", { row: 0, column: 3 }],\n    [\"yu\", { row: 2, column: 3 }],\n    [\"yo\", { row: 4, column: 3 }],\n\n    [\"ma\", { row: 0, column: 4 }],\n    [\"mi\", { row: 1, column: 4 }],\n    [\"mu\", { row: 2, column: 4 }],\n    [\"me\", { row: 3, column: 4 }],\n    [\"mo\", { row: 4, column: 4 }],\n\n    [\"ha\", { row: 0, column: 5 }],\n    [\"hi\", { row: 1, column: 5 }],\n    [\"fu\", { row: 2, column: 5 }],\n    [\"he\", { row: 3, column: 5 }],\n    [\"ho\", { row: 4, column: 5 }],\n\n    [\"na\", { row: 0, column: 6 }],\n    [\"ni\", { row: 1, column: 6 }],\n    [\"nu\", { row: 2, column: 6 }],\n    [\"ne\", { row: 3, column: 6 }],\n    [\"no\", { row: 4, column: 6 }],\n\n    [\"ta\", { row: 0, column: 7 }],\n    [\"chi\", { row: 1, column: 7 }],\n    [\"tsu\", { row: 2, column: 7 }],\n    [\"te\", { row: 3, column: 7 }],\n    [\"to\", { row: 4, column: 7 }],\n\n    [\"sa\", { row: 0, column: 8 }],\n    [\"shi\", { row: 1, column: 8 }],\n    [\"su\", { row: 2, column: 8 }],\n    [\"se\", { row: 3, column: 8 }],\n    [\"so\", { row: 4, column: 8 }],\n\n    [\"ka\", { row: 0, column: 9 }],\n    [\"ki\", { row: 1, column: 9 }],\n    [\"ku\", { row: 2, column: 9 }],\n    [\"ke\", { row: 3, column: 9 }],\n    [\"ko\", { row: 4, column: 9 }],\n\n    [\"a\", { row: 0, column: 10 }],\n    [\"i\", { row: 1, column: 10 }],\n    [\"u\", { row: 2, column: 10 }],\n    [\"e\", { row: 3, column: 10 }],\n    [\"o\", { row: 4, column: 10 }],\n  ]),\n};\n\nexport const kanaMaps: KanaMaps = {\n  [Deck.Hiragana]: option.none(),\n  [Deck.Katakana]: option.none(),\n};\n\nconst hiraganaMapLoaded = loadTable(HIRAGANA_TABLE_URL, HIRAGANA_TABLE_CONFIG);\nconst katakanaMapLoaded = loadTable(KATAKANA_TABLE_URL, KATAKANA_TABLE_CONFIG);\n\nhiraganaMapLoaded.raw.then(imageMap => {\n  kanaMaps[Deck.Hiragana] = option.some(imageMap);\n});\nkatakanaMapLoaded.raw.then(imageMap => {\n  kanaMaps[Deck.Katakana] = option.some(imageMap);\n});\n\nexport const kanaMapsLoaded = Promise.all([\n  hiraganaMapLoaded.raw,\n  katakanaMapLoaded.raw,\n]);\n\nfunction loadTable(\n  url: string,\n  config: TableConfig,\n): ResolvablePromise<KanaMap> {\n  const rProm = createResolvablePromise<KanaMap>();\n  const tableImage = document.createElement(\"img\");\n  tableImage.src = url;\n\n  tableImage.addEventListener(\"load\", () => {\n    const tableCanvas = document.createElement(\"canvas\");\n    tableCanvas.width = tableImage.width;\n    tableCanvas.height = tableImage.height;\n    const tableCtx = tableCanvas.getContext(\"2d\")!;\n    tableCtx.drawImage(tableImage, 0, 0);\n\n    const kanaMap = new Map<Romaji, HTMLImageElement>();\n\n    const cellCanvas = document.createElement(\"canvas\");\n    cellCanvas.width = config.crop.width;\n    cellCanvas.height = config.crop.height;\n    const cellCtx = cellCanvas.getContext(\"2d\")!;\n\n    romajiArray.forEach(romaji => {\n      const { column, row } = config.cellPositions.get(romaji)!;\n      const cellLeft = Math.round(config.leftCellX + column * config.cellWidth);\n      const cellTop = Math.round(config.topCellY + row * config.cellHeight);\n      const croppedImageData = tableCtx.getImageData(\n        cellLeft + config.crop.left,\n        cellTop + config.crop.top,\n        config.crop.width,\n        config.crop.height,\n      );\n      cellCtx.putImageData(croppedImageData, 0, 0);\n      const cellImage = document.createElement(\"img\");\n      cellImage.src = cellCanvas.toDataURL(\"image/png\", 1.0);\n      kanaMap.set(romaji, cellImage);\n    });\n\n    rProm.fulfill(kanaMap);\n  });\n\n  tableImage.addEventListener(\"error\", rProm.reject);\n\n  return rProm;\n}\n\nfunction createResolvablePromise<T>(): ResolvablePromise<T> {\n  let fulfill!: (value: T) => void;\n  let reject!: (value: unknown) => void;\n  const raw: Promise<T> = new Promise((f, r) => {\n    fulfill = f;\n    reject = r;\n  });\n  return { raw, fulfill, reject };\n}\n","export default function randomlySort<T>(arr: T[]): T[] {\n  const clone = arr.slice();\n  for (let i = 0; i < 256; i++) {\n    clone.sort(halfPositiveHalfNegative);\n  }\n  return clone;\n}\n\nfunction halfPositiveHalfNegative(): number {\n  return Math.random() - 0.5;\n}\n","import React from \"react\";\nimport Button from \"../components/Button\";\nimport Header from \"../components/Header\";\nimport getDeckName from \"../getDeckName\";\nimport { Deck } from \"../types\";\n\nexport interface Props {\n  deck: Deck;\n  onRestart(): void;\n  onHome(): void;\n}\n\nexport default function PostDrillMenu({\n  deck,\n  onRestart,\n  onHome,\n}: Props): React.ReactElement {\n  return (\n    <>\n      <Header background=\"white\">{getDeckName(deck)}</Header>\n      <Button modifierName=\"blue shadow\" onClick={onRestart}>\n        Restart\n      </Button>\n      <Button modifierName=\"blue shadow\" onClick={onHome}>\n        Home\n      </Button>\n    </>\n  );\n}\n","import { Set as ImmutableSet } from \"immutable\";\nimport React from \"react\";\nimport CardMenu from \"./containers/CardMenu\";\nimport DeckMenu from \"./containers/DeckMenu\";\nimport SettingsMenu from \"./containers/SettingsMenu\";\nimport WritingDrill from \"./containers/WritingDrill\";\nimport { kanaMaps } from \"./decks\";\nimport randomlySort from \"./randomlySort\";\nimport {\n  AppState,\n  AppStateMap,\n  Card,\n  CardMenuState,\n  Deck,\n  MoraCategory,\n  PointerDownEvent,\n  PointerMoveEvent,\n  RomajiMap,\n  SettingsState,\n  StateType,\n  SwipeDirection,\n  WritingDrillState,\n  PostDrillMenuState,\n} from \"./types\";\nimport PostDrillMenu from \"./containers/PostDrillMenu\";\n\nconst HORIZONTAL_SWIPE_SIZE = window.innerWidth * 0.3;\nconst VERTICAL_SWIPE_SIZE = window.innerHeight * 0.2;\n\nconst SIMULATED_SWIPE_DURATION = 0.15e3;\nconst SIMULATED_SWIPE_PAUSE_FACTOR = 0.2;\n\nconst PEN_STROKE_WIDTH = 2;\n\nconst PEN_GUESS_COLOR = \"#000088\";\nconst PEN_CORRECTION_COLOR = \"#0088FF\";\n\nconst SUPPORTS_TOUCH = \"ontouchstart\" in window;\n\nconst LOCAL_STORAGE_KEYS = {\n  selectedSwipeDirection: \"selectedSwipeDirection\",\n  areWritingCorrectionsEnabled: \"areWritingCorrectionsEnabled\",\n  includedCategories: \"includedCategories\",\n} as const;\n\nexport default class CardsAgainstIlliteracy extends React.Component<\n  {},\n  AppState\n> {\n  private canvasRef: React.RefObject<HTMLCanvasElement>;\n  private previousPenLocation: null | { x: number; y: number };\n\n  constructor(props: {}) {\n    super(props);\n\n    this.state = {\n      stateType: StateType.DeckMenu,\n    };\n\n    this.bindMethods();\n\n    this.canvasRef = React.createRef();\n    this.previousPenLocation = null;\n  }\n\n  bindMethods(): void {\n    this.onSettings = this.onSettings.bind(this);\n    this.onSelectSwipeDirection = this.onSelectSwipeDirection.bind(this);\n    this.onToggleWritingCorrections = this.onToggleWritingCorrections.bind(\n      this,\n    );\n    this.onDeckSelect = this.onDeckSelect.bind(this);\n    this.onToggleCategory = this.onToggleCategory.bind(this);\n    this.onDrillStart = this.onDrillStart.bind(this);\n    this.onCardReveal = this.onCardReveal.bind(this);\n    this.onAffirmationSwipeStart = this.onAffirmationSwipeStart.bind(this);\n    this.onAffirmationSwipeMove = this.onAffirmationSwipeMove.bind(this);\n    this.onAffirmationSwipeEnd = this.onAffirmationSwipeEnd.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onCardCorrect = this.onCardCorrect.bind(this);\n    this.onCardIncorrect = this.onCardIncorrect.bind(this);\n    this.onDrillRestart = this.onDrillRestart.bind(this);\n    this.onHome = this.onHome.bind(this);\n    this.onPenStart = this.onPenStart.bind(this);\n    this.onPenMove = this.onPenMove.bind(this);\n    this.onPenEnd = this.onPenEnd.bind(this);\n  }\n\n  componentDidMount() {\n    if (!SUPPORTS_TOUCH) {\n      window.addEventListener(\"keyup\", this.onKeyUp);\n    }\n  }\n\n  componentWillUnmount() {\n    if (!SUPPORTS_TOUCH) {\n      window.removeEventListener(\"keyup\", this.onKeyUp);\n    }\n  }\n\n  render(): JSX.Element {\n    const { state } = this;\n\n    switch (state.stateType) {\n      case StateType.DeckMenu:\n        return (\n          <DeckMenu\n            decks={[Deck.Hiragana, Deck.Katakana]}\n            onSettings={this.onSettings}\n            onSelect={this.onDeckSelect}\n          />\n        );\n      case StateType.SettingsMenu:\n        return (\n          <SettingsMenu\n            selectedSwipeDirection={state.selectedSwipeDirection}\n            areWritingCorrectionsEnabled={state.areWritingCorrectionsEnabled}\n            onHome={this.onHome}\n            onSelectSwipeDirection={this.onSelectSwipeDirection}\n            onToggleWritingCorrections={this.onToggleWritingCorrections}\n          />\n        );\n      case StateType.CardMenu: {\n        const { deck, includedCategories } = state;\n        return (\n          <CardMenu\n            deck={deck}\n            includedCategories={includedCategories}\n            onToggleCategory={this.onToggleCategory}\n            onHome={this.onHome}\n            onDrillStart={this.onDrillStart}\n          />\n        );\n      }\n      case StateType.WritingDrill: {\n        const {\n          deck,\n          remainingCards,\n          isTopCardRevealed,\n          selectedSwipeDirection,\n          normalizedDelta,\n          areWritingCorrectionsEnabled,\n        } = state;\n\n        return (\n          <WritingDrill\n            deck={deck}\n            remainingCards={remainingCards}\n            isTopCardRevealed={isTopCardRevealed}\n            selectedSwipeDirection={selectedSwipeDirection}\n            normalizedDelta={normalizedDelta}\n            areWritingCorrectionsEnabled={areWritingCorrectionsEnabled}\n            onHome={this.onHome}\n            onPenStart={this.onPenStart}\n            onPenMove={this.onPenMove}\n            onPenEnd={this.onPenEnd}\n            onReveal={this.onCardReveal}\n            onAffirmationSwipeStart={this.onAffirmationSwipeStart}\n            onAffirmationSwipeMove={this.onAffirmationSwipeMove}\n            onAffirmationSwipeEnd={this.onAffirmationSwipeEnd}\n            canvasRef={this.canvasRef}\n          />\n        );\n      }\n      case StateType.PostDrillMenu: {\n        const { deck } = state;\n\n        return (\n          <PostDrillMenu\n            deck={deck}\n            onHome={this.onHome}\n            onRestart={this.onDrillRestart}\n          />\n        );\n      }\n    }\n  }\n\n  onSettings(): void {\n    const updatedState: SettingsState = {\n      stateType: StateType.SettingsMenu,\n      selectedSwipeDirection:\n        (localStorage.getItem(\n          LOCAL_STORAGE_KEYS.selectedSwipeDirection,\n        ) as SwipeDirection) || \"Right\",\n      areWritingCorrectionsEnabled:\n        localStorage.getItem(\n          LOCAL_STORAGE_KEYS.areWritingCorrectionsEnabled,\n        ) === \"true\",\n    };\n    this.setState(updatedState);\n  }\n\n  onSelectSwipeDirection(selectedSwipeDirection: SwipeDirection): void {\n    this.updateState(StateType.SettingsMenu, {\n      selectedSwipeDirection,\n    });\n    localStorage.selectedSwipeDirection = selectedSwipeDirection;\n  }\n\n  updateState<T extends StateType>(\n    _stateType: T,\n    updated: Partial<AppStateMap[T]>,\n  ): void {\n    this.setState(updated as any);\n  }\n\n  onToggleWritingCorrections(): void {\n    const state = this.state as SettingsState;\n    const areWritingCorrectionsEnabled = !state.areWritingCorrectionsEnabled;\n    const updatedState: Partial<SettingsState> = {\n      areWritingCorrectionsEnabled,\n    };\n    this.updateState(state.stateType, updatedState);\n    localStorage.areWritingCorrectionsEnabled = areWritingCorrectionsEnabled;\n  }\n\n  onDeckSelect(deck: Deck): void {\n    const serializedCategorySet = localStorage.getItem(\n      LOCAL_STORAGE_KEYS.includedCategories,\n    );\n    const updatedState: CardMenuState = {\n      stateType: StateType.CardMenu,\n      deck,\n      includedCategories:\n        serializedCategorySet === null\n          ? ImmutableSet()\n          : categorySetUtils.parse(serializedCategorySet),\n    };\n    this.setState(updatedState);\n  }\n\n  onToggleCategory(category: MoraCategory): void {\n    const state = this.state as CardMenuState;\n    const { includedCategories } = state;\n    const updatedCategories = includedCategories.has(category)\n      ? includedCategories.remove(category)\n      : includedCategories.add(category);\n    this.updateState(state.stateType, {\n      includedCategories: updatedCategories,\n    });\n    localStorage.setItem(\n      LOCAL_STORAGE_KEYS.includedCategories,\n      categorySetUtils.stringify(updatedCategories),\n    );\n  }\n\n  onDrillStart(): void {\n    const state = this.state as CardMenuState;\n    const initialCards = randomlySort(\n      getInitialCards(state.includedCategories, state.deck),\n    );\n\n    const newState: WritingDrillState = {\n      stateType: StateType.WritingDrill,\n      deck: state.deck,\n      initialCards,\n      remainingCards: initialCards,\n      cardsToRepractice: [],\n      isTopCardRevealed: false,\n      areWritingCorrectionsEnabled:\n        localStorage.getItem(\n          LOCAL_STORAGE_KEYS.areWritingCorrectionsEnabled,\n        ) === \"true\",\n      selectedSwipeDirection:\n        (localStorage.getItem(\n          LOCAL_STORAGE_KEYS.selectedSwipeDirection,\n        ) as SwipeDirection) || \"Right\",\n      startingTouch: undefined,\n      normalizedDelta: 0,\n    };\n    this.setState(newState);\n  }\n\n  onAffirmationSwipeStart({ changedTouches }: React.TouchEvent): void {\n    const state = this.state as WritingDrillState;\n    if (!state.isTopCardRevealed) {\n      return;\n    }\n\n    const isSwipeDirectionHorizontal = [\"Right\", \"Left\"].includes(\n      state.selectedSwipeDirection,\n    );\n\n    const touch = isSwipeDirectionHorizontal\n      ? {\n          id: changedTouches[0].identifier,\n          x: changedTouches[0].clientX,\n        }\n      : {\n          id: changedTouches[0].identifier,\n          y: changedTouches[0].clientY,\n        };\n\n    const updatedState: Partial<WritingDrillState> = {\n      startingTouch: touch,\n      normalizedDelta: 0,\n    };\n\n    this.updateState(state.stateType, updatedState);\n  }\n\n  onAffirmationSwipeMove(event: React.TouchEvent): void {\n    const state = this.state as WritingDrillState;\n\n    event.preventDefault();\n    const { changedTouches } = event;\n    const { id } = state.startingTouch!;\n    const newTouch = Array.from(changedTouches).find(t => t.identifier === id);\n    if (!newTouch) {\n      return;\n    }\n    const isSwipeDirectionHorizontal = [\"Right\", \"Left\"].includes(\n      state.selectedSwipeDirection,\n    );\n    if (isSwipeDirectionHorizontal) {\n      const deltaX = newTouch.clientX - state.startingTouch!.x!;\n      const normalizedDelta = Math.max(\n        -1,\n        Math.min(1, deltaX / HORIZONTAL_SWIPE_SIZE),\n      );\n      const updatedState: Partial<WritingDrillState> = {\n        normalizedDelta,\n      };\n      this.updateState(state.stateType, updatedState);\n    } else {\n      const deltaY = newTouch.clientY - state.startingTouch!.y!;\n      const normalizedDelta = Math.max(\n        -1,\n        Math.min(1, deltaY / VERTICAL_SWIPE_SIZE),\n      );\n      const updatedState = {\n        normalizedDelta,\n      };\n      this.updateState(state.stateType, updatedState);\n    }\n  }\n\n  onAffirmationSwipeEnd(): void {\n    const state = this.state as WritingDrillState;\n    const { selectedSwipeDirection, normalizedDelta } = state;\n    const updatedState: Partial<WritingDrillState> = {\n      startingTouch: undefined,\n      normalizedDelta: 0,\n    };\n    this.updateState(state.stateType, updatedState);\n    if (\n      (selectedSwipeDirection === \"Right\" && normalizedDelta === -1) ||\n      (selectedSwipeDirection === \"Left\" && normalizedDelta === 1) ||\n      (selectedSwipeDirection === \"Up\" && normalizedDelta === 1) ||\n      (selectedSwipeDirection === \"Down\" && normalizedDelta === -1)\n    ) {\n      this.onCardIncorrect();\n    } else if (\n      (selectedSwipeDirection === \"Right\" && normalizedDelta === 1) ||\n      (selectedSwipeDirection === \"Left\" && normalizedDelta === -1) ||\n      (selectedSwipeDirection === \"Up\" && normalizedDelta === -1) ||\n      (selectedSwipeDirection === \"Down\" && normalizedDelta === 1)\n    ) {\n      this.onCardCorrect();\n    }\n  }\n\n  onKeyUp({ key }: KeyboardEvent): void {\n    const { state } = this;\n\n    if (state.stateType !== StateType.WritingDrill) {\n      return;\n    }\n\n    if (state.isTopCardRevealed) {\n      const isSwipeDirectionHorizontal = [\"Right\", \"Left\"].includes(\n        state.selectedSwipeDirection,\n      );\n\n      if (isSwipeDirectionHorizontal) {\n        if (key === \"ArrowRight\" || key === \"Right\") {\n          this.simulateRightSwipe();\n        } else if (key === \"ArrowLeft\" || key === \"Left\") {\n          this.simulateLeftSwipe();\n        }\n      } else {\n        if (key === \"ArrowUp\" || key === \"Up\") {\n          this.simulateUpSwipe();\n        } else if (key === \"ArrowDown\" || key === \"Down\") {\n          this.simulateDownSwipe();\n        }\n      }\n    }\n  }\n\n  onCardReveal(): void {\n    const updatedState: Partial<WritingDrillState> = {\n      isTopCardRevealed: true,\n      normalizedDelta: 0,\n    };\n    this.updateState(StateType.WritingDrill, updatedState);\n  }\n\n  onCardCorrect(): void {\n    this.clearCanvas();\n\n    const state = this.state as WritingDrillState;\n\n    if (state.remainingCards.length > 1) {\n      this.updateState(state.stateType, {\n        remainingCards: state.remainingCards.slice(1),\n        isTopCardRevealed: false,\n      });\n    } else if (state.cardsToRepractice.length > 0) {\n      this.updateState(state.stateType, {\n        remainingCards: randomlySort(state.cardsToRepractice),\n        cardsToRepractice: [],\n        isTopCardRevealed: false,\n      });\n    } else {\n      const newState: PostDrillMenuState = {\n        stateType: StateType.PostDrillMenu,\n        deck: state.deck,\n        initialCards: state.initialCards,\n      };\n      this.setState(newState);\n    }\n  }\n\n  clearCanvas(): void {\n    const { width, height } = this.canvasRef.current!;\n    const ctx = this.canvasRef.current!.getContext(\"2d\")!;\n    ctx.clearRect(0, 0, width, height);\n  }\n\n  onCardIncorrect(): void {\n    this.clearCanvas();\n\n    const state = this.state as WritingDrillState;\n\n    if (state.remainingCards.length > 1) {\n      this.updateState(state.stateType, {\n        remainingCards: state.remainingCards.slice(1),\n        cardsToRepractice: state.cardsToRepractice.concat([\n          state.remainingCards[0],\n        ]),\n        isTopCardRevealed: false,\n      });\n    } else {\n      this.updateState(state.stateType, {\n        remainingCards: randomlySort(\n          state.cardsToRepractice.concat([state.remainingCards[0]]),\n        ),\n        cardsToRepractice: [],\n        isTopCardRevealed: false,\n      });\n    }\n  }\n\n  onDrillRestart(): void {\n    const state = this.state as PostDrillMenuState;\n    this.setState({\n      stateType: StateType.WritingDrill,\n      deck: state.deck,\n      remainingCards: randomlySort(state.initialCards),\n      isTopCardRevealed: false,\n      normalizedDelta: 0,\n      cardsToRepractice: [],\n    });\n  }\n\n  onHome(): void {\n    this.setState({\n      stateType: StateType.DeckMenu,\n    });\n  }\n\n  onPenStart(event: PointerDownEvent): void {\n    const state = this.state as WritingDrillState;\n\n    const [clientX, clientY] =\n      event.type === \"touchstart\"\n        ? [event.changedTouches[0].clientX, event.changedTouches[0].clientY]\n        : [event.clientX, event.clientY];\n    const offsetY = window.innerHeight * 0.11;\n    const adjustedY = clientY - offsetY;\n    this.previousPenLocation = {\n      x: clientX,\n      y: adjustedY,\n    };\n    const ctx = this.canvasRef.current!.getContext(\"2d\")!;\n    ctx.fillStyle = state.isTopCardRevealed\n      ? PEN_CORRECTION_COLOR\n      : PEN_GUESS_COLOR;\n    ctx.fillRect(\n      clientX,\n      clientY - offsetY,\n      PEN_STROKE_WIDTH,\n      PEN_STROKE_WIDTH,\n    );\n  }\n\n  onPenMove(event: PointerMoveEvent): void {\n    event.preventDefault();\n\n    const state = this.state as WritingDrillState;\n\n    if (this.previousPenLocation === null) {\n      return;\n    }\n\n    const [clientX, clientY] =\n      event.type === \"touchmove\"\n        ? [event.changedTouches[0].clientX, event.changedTouches[0].clientY]\n        : [event.clientX, event.clientY];\n    const offsetY = window.innerHeight * 0.11;\n    const adjustedY = clientY - offsetY;\n    const ctx = this.canvasRef.current!.getContext(\"2d\")!;\n    ctx.fillRect(clientX, clientY - offsetY, 1, 1);\n    ctx.beginPath();\n    ctx.moveTo(this.previousPenLocation.x, this.previousPenLocation.y);\n    ctx.lineTo(clientX, adjustedY);\n    ctx.closePath();\n    ctx.lineWidth = PEN_STROKE_WIDTH;\n    ctx.strokeStyle = state.isTopCardRevealed\n      ? PEN_CORRECTION_COLOR\n      : PEN_GUESS_COLOR;\n    ctx.stroke();\n    this.previousPenLocation = {\n      x: clientX,\n      y: adjustedY,\n    };\n  }\n\n  onPenEnd(): void {\n    this.previousPenLocation = null;\n  }\n\n  simulateRightSwipe(): void {\n    const state = this.state as WritingDrillState;\n\n    const start = Date.now();\n    const render = () => {\n      const now = Date.now();\n      const completionFactor = (now - start) / SIMULATED_SWIPE_DURATION;\n      if (completionFactor < 1 + SIMULATED_SWIPE_PAUSE_FACTOR) {\n        requestAnimationFrame(render);\n      } else {\n        if (state.selectedSwipeDirection === \"Right\") {\n          this.onCardCorrect();\n        } else {\n          this.onCardIncorrect();\n        }\n      }\n      this.updateState(state.stateType, {\n        normalizedDelta: Math.min(1, completionFactor),\n      });\n    };\n    render();\n  }\n\n  simulateLeftSwipe(): void {\n    const state = this.state as WritingDrillState;\n\n    const start = Date.now();\n    const render = () => {\n      const now = Date.now();\n      const completionFactor = (now - start) / SIMULATED_SWIPE_DURATION;\n      if (completionFactor < 1 + SIMULATED_SWIPE_PAUSE_FACTOR) {\n        requestAnimationFrame(render);\n      } else {\n        if (state.selectedSwipeDirection === \"Left\") {\n          this.onCardCorrect();\n        } else {\n          this.onCardIncorrect();\n        }\n      }\n      this.updateState(state.stateType, {\n        normalizedDelta: Math.max(-1, -completionFactor),\n      });\n    };\n    render();\n  }\n\n  simulateUpSwipe(): void {\n    const state = this.state as WritingDrillState;\n    const start = Date.now();\n    const render = () => {\n      const now = Date.now();\n      const completionFactor = (now - start) / SIMULATED_SWIPE_DURATION;\n      if (completionFactor < 1 + SIMULATED_SWIPE_PAUSE_FACTOR) {\n        requestAnimationFrame(render);\n      } else {\n        if (state.selectedSwipeDirection === \"Up\") {\n          this.onCardCorrect();\n        } else {\n          this.onCardIncorrect();\n        }\n      }\n      this.updateState(state.stateType, {\n        normalizedDelta: Math.max(-1, -completionFactor),\n      });\n    };\n    render();\n  }\n\n  simulateDownSwipe() {\n    const state = this.state as WritingDrillState;\n\n    const start = Date.now();\n    const render = () => {\n      const now = Date.now();\n      const completionFactor = (now - start) / SIMULATED_SWIPE_DURATION;\n      if (completionFactor < 1 + SIMULATED_SWIPE_PAUSE_FACTOR) {\n        requestAnimationFrame(render);\n      } else {\n        if (state.selectedSwipeDirection === \"Down\") {\n          this.onCardCorrect();\n        } else {\n          this.onCardIncorrect();\n        }\n      }\n      this.updateState(state.stateType, {\n        normalizedDelta: Math.min(1, completionFactor),\n      });\n    };\n    render();\n  }\n}\n\nconst categorySetUtils = {\n  stringify(set: ImmutableSet<MoraCategory>): string {\n    return JSON.stringify([...set.keys()]);\n  },\n  parse(string: string): ImmutableSet<MoraCategory> {\n    return ImmutableSet(JSON.parse(string));\n  },\n};\n\nfunction getInitialCards(\n  categories: ImmutableSet<MoraCategory>,\n  deck: Deck,\n): Card[] {\n  const cards = [];\n  for (const category of categories) {\n    for (const romaji of RomajiMap[category]) {\n      cards.push({\n        romaji,\n        image: kanaMaps[deck]\n          .expect(\"Kana image map has not loaded yet\")\n          .get(romaji)!,\n      });\n    }\n  }\n  return cards;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport CardsAgainstIlliteracy from \"./CardsAgainstIlliteracy\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <CardsAgainstIlliteracy />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}